= EventoPass
:author: Alfred Perez, Ferran Carmona, Guiu Puigantell
:doctype: book
:chapter-label:
:sectnums:
:toc: left
:toclevels: 6
:toc-title: Table of Contents
:front-cover-image: image::images/logo.png[]

== Objectiu de l'Aplicació
El projecte té com a objectiu principal el desenvolupament d'un portal web innovador destinat a la venda d'entrades per a esdeveniments variats. Aquesta plataforma es concep com un eina clau per als promotors d'esdeveniments, oferint-los la capacitat de gestionar la venda d'entrades i la publicació dels seus esdeveniments de manera eficient i centralitzada.

La plataforma es diferenciarà per les següents característiques:

. *Venda d'Entrades*: Facilitarà la compra d'entrades de manera segura i fiable, satisfent les necessitats tant dels promotors com dels assistents.
. *Gestió d'Esdeveniments pels Promotors*: Permetrà als promotors publicar i gestionar els seus esdeveniments, creant una experiència personalitzada i adaptada a les seves necessitats.
. *Model de Negoci*: Implementarà un model de negoci basat en un percentatge sobre les vendes de cada entrada, assegurant un benefici mutu entre la plataforma i els promotors.
. *Validació d'Entrades*: A través d'una aplicació web independent, es proporcionarà una solució per a la validació eficient d'entrades en l'entrada dels esdeveniments, garantint una gestió segura i ràpida.

Aquesta plataforma no només respondrà a una necessitat de mercat actual, sinó que també aportarà valor afegit als seus usuaris, facilitant una experiència d'usuari millorada i eficient tant per als promotors com per als assistents dels esdeveniments.


== Disseny de Base de Dades

El disseny de la base de dades per al portal web es basa en diverses taules interconnectades que garanteixen una gestió eficient de les dades dels esdeveniments. Aquestes taules principals són `categories`, `events`, `venues`, `sessions`, `purchases`, `users`, `ticket_types` i `tickets`. A continuació, es detallen aquestes taules i les seves relacions.

image::images/DiagramaE-R.png[Diagrama d'Entitat-Relació,800,600]

== Taules de la Base de Dades

=== Taula: Venues
* `id`: Clau primària, bigint.
* `name`: Nom del recinte, character varying(255).
* `location`: Ubicació del recinte, text.
* `capacity`: Capacitat, integer, nullable.
* `created_at`: Data de creació, timestamp.
* `updated_at`: Data d'actualització, timestamp.

=== Taula: Users
* `id`: Clau primària.
* `name`: Nom de l'usuari.
* `email`: Correu electrònic, únic.
* `email_verified_at`: Data de verificació del correu, nullable.
* `password`: Contrasenya.
* `remember_token`: Token de recordatori.
* `created_at`: Data de creació, timestamp.
* `updated_at`: Data d'actualització, timestamp.
* `role_id`: Clau forana a `roles`, bigint, nullable.

=== Taula: Categories
* `id`: Clau primària, bigint.
* `name`: Nom de la categoria, character varying(255).
* `created_at`: Data de creació, timestamp.
* `updated_at`: Data d'actualització, timestamp.

=== Taula: Events
* `id`: Clau primària, bigint.
* `name`: Nom de l'esdeveniment, character varying(255).
* `description`: Descripció de l'esdeveniment, text.
* `main_image`: Imatge principal, character varying(255).
* `category_id`: Clau forana a `categories`, bigint.
* `venue_id`: Clau forana a `venues`, bigint.
* `event_date`: Data de l'esdeveniment, timestamp, nullable.
* `max_capacity`: Aforament màxim, integer, nullable.
* `video_link`: Enllaç a vídeo promocional, character varying(255), nullable.
* `hidden`: Esdeveniment ocult, boolean, default false.
* `created_at`: Data de creació, timestamp.
* `updated_at`: Data d'actualització, timestamp.

=== Taula: Sessions
* `id`: Clau primària, bigint.
* `event_id`: Clau forana a `events`, bigint.
* `date_time`: Data i hora de la sessió, timestamp.
* `online_sale_end_time`: Hora de finalització de la venda en línia, timestamp, nullable.
* `created_at`: Data de creació, timestamp.
* `updated_at`: Data d'actualització, timestamp.

=== Taula: Ticket_Types
* `id`: Clau primària, bigint.
* `name`: Nom del tipus de tiquet, character varying(255).
* `price`: Preu, numeric(8,2).
* `available_tickets`: Entrades disponibles, integer, nullable.
* `created_at`: Data de creació, timestamp.
* `updated_at`: Data d'actualització, timestamp.

=== Taula: Purchases
* `id`: Clau primària, bigint.
* `user_id`: Clau forana a `users`, bigint.
* `session_id`: Clau forana a `sessions`, bigint.
* `total_price`: Preu total, numeric(8,2).
* `created_at`: Data de creació, timestamp.
* `updated_at`: Data d'actualització, timestamp.

=== Taula: Tickets
* `id`: Clau primària, bigint.
* `purchase_id`: Clau forana a `purchases`, bigint.
* `type_id`: Clau forana a `ticket_types`, bigint.
* `created_at`: Data de creació, timestamp.
* `updated_at`: Data d'actualització, timestamp.

=== Taula: Roles
* `id`: Clau primària.
* `name`: Nom, únic.
* `created_at`: Data de creació, timestamp.
* `updated_at`: Data d'actualització, timestamp.

=== Taula: Event_Images
* `id`: Clau primària, bigint.
* `event_id`: Clau forana a `events`, bigint.
* `image_url`: URL de la imatge.
* `is_main`: Imatge principal, boolean, default false.
* `created_at`: Data de creació, timestamp.
* `updated_at`: Data d'actualització, timestamp.

=== Taula: Addresses
* `id`: Clau primària, bigint.
* `province`: Província, character varying(255).
* `city`: Ciutat, character varying(255).
* `postal_code`: Codi postal, character varying(255).
* `venue_name`: Nom del local, character varying(255).
* `capacity`: Capacitat, integer.
* `user_id`: Clau forana a `users`, bigint.
* `created_at`: Data de creació, timestamp.
* `updated_at`: Data d'actualització, timestamp.


image::images/DiagramaUML.png[Diagrama UML,1000,800]

== Sketching i Mockup d'Interfícies
Descripció del procés de disseny d'interfícies, amb imatges dels sketchings i mockups.

== Guia d'Estil

La guia d'estil de l'aplicació proporciona una referència visual i técnica per mantenir la coherència en tots els elements gràfics i interfaces d'usuari. A continuació es detallen els components clau de la nostra guia d'estil.

=== Paleta de Colors

La nostra paleta de colors està dissenyada per reflectir la nostra marca i facilitar la lectura i la navegació.

[options="header"]
|=======================
| Nom          | Hex       
| Fons i Contrast | #F0E6D2# 
| Principal    | #5C5346# 
| Botons i Trucades d'Ació | #D4AF37# 
| Text i Detalls | #1A1A1A# 
| Destacats i Enllaços | #C9B7A5# 
| Elements Secundaris | #857C6D# 
|=======================

=== Tipografies

==== Tipografies per a Escriptori

Utilitzem un conjunt seleccionat de tipografies per garantir que la nostra comunicació sigui clara i consistent.

[options="header"]
|=======================
| Element        | Font                  | Mida | Pes
| Capçalera H1   | Montserrat Bold       | 36px | Bold
| Capçalera H2   | Montserrat SemiBold   | 28px | SemiBold
| Capçalera H3   | Montserrat SemiBold   | 22px | SemiBold
| Text           | Lato Regular          | 18px | Regular
| Botons i Trucades d'Ació | Lato Light  | 16px | Light
| Text d'Ajuda i Peu de Pàgina | Lato Light | 14px | Light
| Etiquetes de Formulari i Menús de Navegació | Roboto Regular | 16px | Regular
|=======================

==== Tipografies per a Mòbil

Per a una millor experiència d'usuari en dispositius mòbils, hem adaptat les mides de les nostres tipografies per assegurar una lectura òptima en pantalles més petites.

[options="header"]
|=======================
| Element        | Font                  | Mida   | Pes
| Capçalera H1   | Montserrat Bold       | 30px   | Bold
| Capçalera H2   | Montserrat SemiBold   | 24px   | SemiBold
| Capçalera H3   | Montserrat SemiBold   | 20px   | SemiBold
| Text           | Lato Regular          | 16px   | Regular
| Botons i Trucades d'Ació | Lato Light  | 18px   | Light
| Text d'Ajuda i Peu de Pàgina | Lato Light | 12px   | Light
| Etiquetes de Formulari i Menús de Navegació | Roboto Regular | 14px   | Regular
|=======================

Noteu que la mida dels botons i trucades d'acció s'ha incrementat lleugerament per a facilitar la interacció tàctil, mentre que les mides del text d'ajuda i els peus de pàgina s'han reduït per optimitzar l'espai sense comprometre la llegibilitat.


=== Estàndards de Disseny

Els estàndards de disseny inclouen les especificacions per a marges, espaiat, alineació i altres elements de disseny que contribueixen a la coherència visual i funcional de l'aplicació. S'espera que tots els dissenyadors i desenvolupadors segueixin aquests estàndards per assegurar una experiència d'usuari unificada.


== Manual d'Instal·lació/Distribució
Pas a pas detallat de com instal·lar i distribuir l'aplicació.

=== Diagrama de xarxa:
image::images/diagramaServerIsard.png[Diagrama xarxa isard,800,600]

=== Instal·lació del apache2:
Fem un update -> sudo apt update

Instal·lem l'apache2 -> sudo apt install apache2

I el podem engegar -> sudo systemctl enable apache2

=== Creació del docker:
Instal·lem les dependencies del Docker -> sudo apt install apt-transport-https ca-certificates curl gnupg lsb-release

Afegim la clau GPG oficial del Docker -> curl -fsSL https://download.docker.com/linux/debian/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg

Configurem el repositio de Docker -> echo "deb [signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/debian $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null

Fem un update -> sudo apt update

Instal·lem el Docker CE -> sudo apt install docker-ce docker-ce-cli containerd.io

Ahora descargamos la imagen del Postgres -> docker pull postgres:latest

Creamos el contenedor -> docker run -d --name mi_postgres -e POSTGRES_PASSWORD=mi_contraseña -e POSTGRES_USER=mi_usuario -e POSTGRES_DB=mi_basededatos -v nombre_del_volumen:/var/lib/postgresql/data -p 5432:5432 postgres:latest

.En el teu fitxer .env, edita les següents líneas per a conectarte a PostgreSQL:

[source,ini]
----
DB_CONNECTION=pgsql
DB_HOST=127.0.0.1
DB_PORT=5432
DB_DATABASE=baseDeDatos
DB_USERNAME=postgres
DB_PASSWORD=1234
----

=== Obrir servidor web:

Fiquem el nostre projecte a /var/www/html

Creem un fitxer de configuració del apache2 -> /etc/apache2/sites-available/nom.conf

Configures el fitxer amb les teves rutes i ips:

[source,apache]
----
<VirtualHost *:80>
    ServerAdmin webmaster@tudominio.com
    ServerName tudominio.com
    DocumentRoot /var/www/html/tudominio/public

    <Directory /var/www/html/tudominio>
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined
</VirtualHost>
----

Per ultim reiniciem el servei apache2 -> sudo systemctl restart apache2

== Documentació de Permisos
Descripció detallada dels permisos necessaris per a components, programes, contenidors, etc.

Hem de donar permisos a la carpeta de logs amb aquestes dos comandes -> chmod -R 775 storage i chown -R www-data:www-data logs

I hem de fer un link simbòlic entre storag/app i publiv amb -> php artisan storage:link

== Línies Futures
Plantejaments sobre l'evolució futura del projecte.

== Conclusions
* Desviacions en la planificació.
* Aportacions del projecte als coneixements de l'alumne.

== Glossari
Termes clau utilitzats al llarg de la memòria.

== Web-grafia i Altres Recursos de Consulta
Llistat de fonts consultades i recursos addicionals.

== Presentació del Projecte
Breu descripció de com es presentarà el projecte.

